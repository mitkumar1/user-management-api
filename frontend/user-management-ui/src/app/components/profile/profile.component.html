<div class="container">
  <div class="profile-header">
    <h1>
      <mat-icon>person</mat-icon>
      User Profile
    </h1>
  </div>

  <div *ngIf="loading" class="loading-container">
    <mat-spinner></mat-spinner>
    <p>Loading profile...</p>
  </div>

  <div class="profile-content" *ngIf="!loading && user">
    <mat-card class="profile-card">
      <mat-card-header>
        <div mat-card-avatar class="profile-avatar">
          <mat-icon>account_circle</mat-icon>
        </div>
        <mat-card-title>{{ user.name }}</mat-card-title>
        <mat-card-subtitle>{{ user.username }}</mat-card-subtitle>
      </mat-card-header>
      
      <mat-card-content>
        <div class="profile-info">
          <div class="info-section">
            <h3>
              <mat-icon>info</mat-icon>
              Personal Information
            </h3>
            
            <div class="info-grid">
              <div class="info-item">
                <mat-icon>person</mat-icon>
                <div>
                  <label>Full Name</label>
                  <p>{{ user.name }}</p>
                </div>
              </div>
              
              <div class="info-item">
                <mat-icon>account_circle</mat-icon>
                <div>
                  <label>Username</label>
                  <p>{{ user.username }}</p>
                </div>
              </div>
              
              <div class="info-item">
                <mat-icon>email</mat-icon>
                <div>
                  <label>Email</label>
                  <p>{{ user.email }}</p>
                </div>
              </div>
              
              <div class="info-item" *ngIf="user.id">
                <mat-icon>tag</mat-icon>
                <div>
                  <label>User ID</label>
                  <p>{{ user.id }}</p>
                </div>
              </div>
            </div>
          </div>
          
          <mat-divider></mat-divider>
          
          <div class="info-section" *ngIf="user.roles && user.roles.length > 0">
            <h3>
              <mat-icon>security</mat-icon>
              Roles & Permissions
            </h3>
            
            <div class="roles-container">
              <mat-chip-set>
                <mat-chip *ngFor="let role of user.roles" 
                         [color]="role.name === 'ROLE_ADMIN' ? 'warn' : 'primary'" 
                         selected>
                  <mat-icon matChipAvatar>
                    {{ role.name === 'ROLE_ADMIN' ? 'admin_panel_settings' : 'person' }}
                  </mat-icon>
                  {{ role.name.replace('ROLE_', '') }}
                </mat-chip>
              </mat-chip-set>
              
              <div class="role-description" *ngIf="isAdmin()">
                <mat-icon>info</mat-icon>
                <p>You have administrative privileges on this system.</p>
              </div>
            </div>
          </div>
        </div>
      </mat-card-content>
      
      <mat-card-actions align="end">
        <button mat-button routerLink="/dashboard">
          <mat-icon>arrow_back</mat-icon>
          Back to Dashboard
        </button>
        <button mat-button color="accent" (click)="refreshProfile()">
          <mat-icon>refresh</mat-icon>
          Refresh
        </button>
        <button mat-raised-button color="primary">
          <mat-icon>edit</mat-icon>
          Edit Profile
        </button>
      </mat-card-actions>
    </mat-card>
  </div>
</div>
